[{"title":"Developer guide","layout":"default","sort":1,"content":"<h1 id=\"developer-guide\">Developer guide</h1>\n\n<h2 class=\"no_toc\" id=\"table-of-contents\">Table of contents</h2>\n\n<ol class=\"no_toc text-delta\" id=\"markdown-toc\">\n <li><a href=\"#developer-guide\" id=\"markdown-toc-developer-guide\">Developer guide</a> <ol>\n <li><a href=\"#building-the-operator\" id=\"markdown-toc-building-the-operator\">Building the operator</a> <ol>\n <li><a href=\"#download-the-source-code\" id=\"markdown-toc-download-the-source-code\">Download the source code</a></li>\n <li><a href=\"#build-the-operator-image\" id=\"markdown-toc-build-the-operator-image\">Build the operator image</a></li>\n </ol>\n </li>\n <li><a href=\"#manual-deployment-of-the-operator\" id=\"markdown-toc-manual-deployment-of-the-operator\">Manual deployment of the operator</a></li>\n <li><a href=\"#undeploy-the-operator\" id=\"markdown-toc-undeploy-the-operator\">Undeploy the operator</a></li>\n <li><a href=\"#clean-up-labels\" id=\"markdown-toc-clean-up-labels\">Clean up labels</a></li>\n </ol>\n </li>\n</ol>\n\n<h2 id=\"building-the-operator\">Building the operator</h2>\n\n<h3 id=\"download-the-source-code\">Download the source code</h3>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>git clone https://github.com/kubernetes-sigs/node-feature-discovery-operator\n</code></pre>  </div></div>\n\n<h3 id=\"build-the-operator-image\">Build the operator image</h3>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">IMAGE_REGISTRY</span><span class=\"o\">=</span>&lt;my registry&gt;\nmake image\n</code></pre>  </div></div>\n\n<p>Or for the <code class=\"language-plaintext highlighter-rouge\">minimal</code> variant</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">IMAGE_REGISTRY</span><span class=\"o\">=</span>&lt;my registry&gt;\nmake image-minimal\n</code></pre>  </div></div>\n\n<h4 id=\"push-the-container-image\">Push the container image</h4>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">IMAGE_REGISTRY</span><span class=\"o\">=</span>&lt;my registry&gt;\nmake push\n</code></pre>  </div></div>\n\n<p>Or for the <code class=\"language-plaintext highlighter-rouge\">minimal</code> variant</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">IMAGE_REGISTRY</span><span class=\"o\">=</span>&lt;my registry&gt;\nmake push-minimal\n</code></pre>  </div></div>\n\n<p>Alternatively, instead of specifying variables on the command line,\nyou can edit the Makefile to permanently change parameter defaults\nlike name of the image or namespace where the operator is deployed.</p>\n\n<h2 id=\"manual-deployment-of-the-operator\">Manual deployment of the operator</h2>\n\n<p>After building the image you can simply run</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">IMAGE_REGISTRY</span><span class=\"o\">=</span>&lt;my registry&gt;\nmake deploy\n</code></pre>  </div></div>\n\n<p>Then create a NodeFeatureDiscovery CR by running</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>kubectl apply <span class=\"nt\">-f</span> config/samples/nfd.kubernetes.io_v1_nodefeaturediscovery.yaml\n</code></pre>  </div></div>\n\n<h2 id=\"undeploy-the-operator\">Undeploy the operator</h2>\n\n<p>The operator will use the operand node-feature-discovery\nimage built from: <code class=\"language-plaintext highlighter-rouge\">https://github.com/kubernetes-sigs/node-feature-discovery</code></p>\n\n<p>To uninstall the operator run</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>make undeploy\n</code></pre>  </div></div>\n\n<h2 id=\"clean-up-labels\">Clean up labels</h2>\n\n<p>In case you need to remove the labels created by NFD,\nthe source Makefile comes with a built in target</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>make clean-labels\n</code></pre>  </div></div>\n\n<p>This will clean all labels referencing to\n<code class=\"language-plaintext highlighter-rouge\">feature.node.kubernetes.io</code> and <code class=\"language-plaintext highlighter-rouge\">nfd.node.kubernetes.io</code></p>\n","dir":"/advanced/","name":"developer-guide.md","path":"advanced/developer-guide.md","url":"/advanced/developer-guide.html"},{"title":"Helm","layout":"default","sort":1,"content":"<h1 id=\"deployment-with-helm\">Deployment with Helm</h1>\n\n<h2 class=\"no_toc\" id=\"table-of-contents\">Table of contents</h2>\n\n<ol class=\"no_toc text-delta\" id=\"markdown-toc\">\n <li><a href=\"#deployment-with-helm\" id=\"markdown-toc-deployment-with-helm\">Deployment with Helm</a> <ol>\n <li><a href=\"#prerequisites\" id=\"markdown-toc-prerequisites\">Prerequisites</a></li>\n <li><a href=\"#deployment\" id=\"markdown-toc-deployment\">Deployment</a></li>\n <li><a href=\"#configuration\" id=\"markdown-toc-configuration\">Configuration</a></li>\n <li><a href=\"#uninstalling-the-chart\" id=\"markdown-toc-uninstalling-the-chart\">Uninstalling the chart</a></li>\n <li><a href=\"#chart-parameters\" id=\"markdown-toc-chart-parameters\">Chart parameters</a> <ol>\n <li><a href=\"#general-parameters\" id=\"markdown-toc-general-parameters\">General parameters</a></li>\n <li><a href=\"#controller-deployment-parameters\" id=\"markdown-toc-controller-deployment-parameters\">Controller deployment parameters</a></li>\n </ol>\n </li>\n </ol>\n </li>\n</ol>\n\n<hr />\n\n<p>Helm chart allow to easily deploy and manage the NFD-operator.</p>\n\n<blockquote>\n <p>NOTE: NFD-operator is not ideal for other Helm charts to depend on as that\nmay result in multiple parallel NFD-operator deployments in the same cluster\nwhich is not fully supported by the NFD-operator Helm chart.</p>\n</blockquote>\n\n<h2 id=\"prerequisites\">Prerequisites</h2>\n\n<p><a href=\"https://helm.sh/\">Helm package manager</a> should be installed.</p>\n\n<h2 id=\"deployment\">Deployment</h2>\n\n<p>To install the latest stable version:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">export </span><span class=\"nv\">NFD_O_NS</span><span class=\"o\">=</span>nfd-operator\nhelm repo add nfd-operator https://kubernetes-sigs.github.io/node-feature-discovery-operator/charts\nhelm repo update\nhelm <span class=\"nb\">install </span>nfd-operator/nfd-operator <span class=\"nt\">--namespace</span> <span class=\"nv\">$NFD_O_NS</span> <span class=\"nt\">--create-namespace</span> <span class=\"nt\">--generate-name</span>\n</code></pre>  </div></div>\n\n<p>To install the latest development version you need to clone the NFD-Operator Git\nrepository and install from there.</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>git clone https://github.com/kubernetes-sigs/node-feature-discovery-operator/\n<span class=\"nb\">cd </span>node-feature-discovery-operator/deployment/helm\n<span class=\"nb\">export </span><span class=\"nv\">NFD_O_NS</span><span class=\"o\">=</span>nfd-operator\nhelm <span class=\"nb\">install </span>nfd-operator ./nfd-operator/ <span class=\"nt\">--namespace</span> <span class=\"nv\">$NFD_O_NS</span> <span class=\"nt\">--create-namespace</span>\n</code></pre>  </div></div>\n\n<p>See the <a href=\"#configuration\">configuration</a> section below for instructions how to\nalter the deployment parameters.</p>\n\n<p>In order to deploy the <a href=\"/node-feature-discovery-operator/master/deployment/image-variants.html#minimal\">minimal</a> image you need to\noverride the image tag:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>helm <span class=\"nb\">install </span>nfd-operator ./nfd-operator/ <span class=\"nt\">--set</span> image.tag<span class=\"o\">=</span>master-minimal <span class=\"nt\">--namespace</span> <span class=\"nv\">$NFD_O_NS</span> <span class=\"nt\">--create-namespace</span>\n</code></pre>  </div></div>\n\n<h2 id=\"configuration\">Configuration</h2>\n\n<p>You can override values from <code class=\"language-plaintext highlighter-rouge\">values.yaml</code> and provide a file with custom values:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">export </span><span class=\"nv\">NFD_O_NS</span><span class=\"o\">=</span>nfd-operator\nhelm <span class=\"nb\">install </span>nfd-operator/nfd-operator <span class=\"nt\">-f</span> &lt;path/to/custom/values.yaml&gt; <span class=\"nt\">--namespace</span> <span class=\"nv\">$NFD_O_NS</span> <span class=\"nt\">--create-namespace</span>\n</code></pre>  </div></div>\n\n<p>To specify each parameter separately you can provide them to helm install command:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">export </span><span class=\"nv\">NFD_O_NS</span><span class=\"o\">=</span>nfd-operator\nhelm <span class=\"nb\">install </span>nfd-operator/nfd-operator <span class=\"nt\">--set</span> <span class=\"nv\">nameOverride</span><span class=\"o\">=</span>NFDinstance <span class=\"nt\">--namespace</span> <span class=\"nv\">$NFD_O_NS</span> <span class=\"nt\">--create-namespace</span>\n</code></pre>  </div></div>\n\n<h2 id=\"uninstalling-the-chart\">Uninstalling the chart</h2>\n\n<p>To uninstall the <code class=\"language-plaintext highlighter-rouge\">nfd-operator</code> deployment:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nb\">export </span><span class=\"nv\">NFD_O_NS</span><span class=\"o\">=</span>nfd-operator\nhelm uninstall nfd-operator <span class=\"nt\">--namespace</span> <span class=\"nv\">$NFD_O_NS</span>\n</code></pre>  </div></div>\n\n<p>The command removes all the Kubernetes components associated with the chart and\ndeletes the release.</p>\n\n<h2 id=\"chart-parameters\">Chart parameters</h2>\n\n<p>In order to tailor the deployment of the Node Feature Discovery to your cluster needs\nWe have introduced the following Chart parameters.</p>\n\n<h3 id=\"general-parameters\">General parameters</h3>\n\n<table>\n <thead>\n <tr>\n <th>Name</th>\n <th>Type</th>\n <th>Default</th>\n <th>description</th>\n </tr>\n </thead>\n <tbody>\n <tr>\n <td><code class=\"language-plaintext highlighter-rouge\">image.repository</code></td>\n <td>string</td>\n <td><code class=\"language-plaintext highlighter-rouge\">gcr.io/k8s-staging-nfd/node-feature-discovery-operator</code></td>\n <td>NFD image repository</td>\n </tr>\n <tr>\n <td><code class=\"language-plaintext highlighter-rouge\">image.tag</code></td>\n <td>string</td>\n <td><code class=\"language-plaintext highlighter-rouge\">master</code></td>\n <td>NFD image tag</td>\n </tr>\n <tr>\n <td><code class=\"language-plaintext highlighter-rouge\">image.pullPolicy</code></td>\n <td>string</td>\n <td><code class=\"language-plaintext highlighter-rouge\">Always</code></td>\n <td>Image pull policy</td>\n </tr>\n <tr>\n <td><code class=\"language-plaintext highlighter-rouge\">imagePullSecrets</code></td>\n <td>list</td>\n <td>[]</td>\n <td>ImagePullSecrets is an optional list of references to secrets in the same namespace to use for pulling any of the images used by this PodSpec. If specified, these secrets will be passed to individual puller implementations for them to use. For example, in the case of docker, only DockerConfig type secrets are honored. <a href=\"https://kubernetes.io/docs/concepts/containers/images#specifying-imagepullsecrets-on-a-pod\">More info</a></td>\n </tr>\n <tr>\n <td><code class=\"language-plaintext highlighter-rouge\">nameOverride</code></td>\n <td>string</td>\n <td> </td>\n <td>Override the name of the chart</td>\n </tr>\n <tr>\n <td><code class=\"language-plaintext highlighter-rouge\">fullnameOverride</code></td>\n <td>string</td>\n <td> </td>\n <td>Override a default fully qualified app name</td>\n </tr>\n </tbody>\n</table>\n\n<h3 id=\"controller-deployment-parameters\">Controller deployment parameters</h3>\n\n<table>\n <thead>\n <tr>\n <th>Name</th>\n <th>Type</th>\n <th>Default</th>\n <th>description</th>\n </tr>\n </thead>\n <tbody>\n <tr>\n <td><code class=\"language-plaintext highlighter-rouge\">controller.image.repository</code></td>\n <td>string</td>\n <td><code class=\"language-plaintext highlighter-rouge\">gcr.io/k8s-staging-nfd/node-feature-discovery-operator</code></td>\n <td>NFD-Operator image repository</td>\n </tr>\n <tr>\n <td><code class=\"language-plaintext highlighter-rouge\">controller.image.tag</code></td>\n <td>string</td>\n <td><code class=\"language-plaintext highlighter-rouge\">master</code></td>\n <td>NFD-Operator image tag</td>\n </tr>\n </tbody>\n</table>\n\n","dir":"/deployment/","name":"helm.md","path":"deployment/helm.md","url":"/deployment/helm.html"},{"title":"Introduction","layout":"default","sort":1,"content":"<h1 id=\"node-feature-discovery-operator\">Node Feature Discovery Operator</h1>\n\n<p>Welcome to Node Feature Discovery Operator – an Operator\nFramework implementation around the Node Feature Discovery project to enable\ndetecting hardware features and system configuration!</p>\n\n<p>Continue to:</p>\n\n<ul>\n <li>\n <p><strong><a href=\"/deployment\">Deployment</a></strong> for instructions on how to\ndeploy NFD-Operator to a cluster.</p>\n </li>\n <li>\n <p><strong><a href=\"/advanced\">Advanced</a></strong> for more advanced topics and\nreference.</p>\n </li>\n</ul>\n\n<h1 id=\"introduction\">Introduction</h1>\n\n<p>The Node Feature Discovery Operator manages the detection\nof hardware features and configuration in a Kubernetes\ncluster by labeling the nodes with hardware-specific information.\nThe Node Feature Discovery (NFD) will label the host with\nnode-specific attributes,\nlike PCI cards, kernel, or OS version, and many more.</p>\n\n<p>The NFD Operator is based on the <a href=\"https://operatorframework.io/\">Operator Framework</a>\nan open source toolkit to manage Kubernetes native applications, called\nOperators, in an effective, automated, and scalable way.</p>\n","dir":"/introduction/","name":"index.md","path":"introduction/index.md","url":"/introduction/"},{"title":"NodeFeatureDiscovery","layout":"default","sort":2,"content":"<h1 id=\"the-nodefeaturediscovery-cr\">The NodeFeatureDiscovery CR</h1>\n\n<p>The <code class=\"language-plaintext highlighter-rouge\">NodeFeatureDiscovery</code> CustomResource defines operational variables\nto define the behaviour of the Node Feature Discovery Operand,\nan example of the CustomResource:</p>\n\n<div class=\"language-yaml highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"na\">apiVersion</span><span class=\"pi\">:</span> <span class=\"s\">nfd.kubernetes.io/v1</span>\n<span class=\"na\">kind</span><span class=\"pi\">:</span> <span class=\"s\">NodeFeatureDiscovery</span>\n<span class=\"na\">metadata</span><span class=\"pi\">:</span>\n  <span class=\"na\">name</span><span class=\"pi\">:</span> <span class=\"s\">nfd-master-server</span>\n  <span class=\"na\">namespace</span><span class=\"pi\">:</span> <span class=\"s\">node-feature-discovery-operator</span>\n<span class=\"na\">spec</span><span class=\"pi\">:</span>\n  <span class=\"na\">instance</span><span class=\"pi\">:</span> <span class=\"s2\">\"</span><span class=\"s\">\"</span> <span class=\"c1\"># instance is empty by default</span>\n  <span class=\"c1\">#labelWhiteList: \"\"</span>\n  <span class=\"c1\">#extraLabelNs:</span>\n  <span class=\"c1\">#  - \"example.com\"</span>\n  <span class=\"c1\">#resourceLabels:</span>\n  <span class=\"c1\">#  - \"example.com/resource\"</span>\n  <span class=\"na\">operand</span><span class=\"pi\">:</span>\n    <span class=\"na\">namespace</span><span class=\"pi\">:</span> <span class=\"s\">node-feature-discovery-operator</span>\n    <span class=\"na\">image</span><span class=\"pi\">:</span> <span class=\"s\">gcr.io/k8s-staging-nfd/node-feature-discovery:master</span>\n    <span class=\"na\">imagePullPolicy</span><span class=\"pi\">:</span> <span class=\"s\">Always</span>\n    <span class=\"na\">servicePort</span><span class=\"pi\">:</span> <span class=\"m\">12000</span>\n  <span class=\"na\">workerConfig</span><span class=\"pi\">:</span>\n    <span class=\"na\">configData</span><span class=\"pi\">:</span> <span class=\"pi\">|</span>\n      <span class=\"s\">#core:</span>\n      <span class=\"s\">#  labelWhiteList:</span>\n      <span class=\"s\">#  noPublish: false</span>\n      <span class=\"s\">#  sleepInterval: 60s</span>\n      <span class=\"s\">#  featureSources: [all]</span>\n      <span class=\"s\">#  labelSources: [all]</span>\n      <span class=\"s\">#  klog:</span>\n      <span class=\"s\">#    addDirHeader: false</span>\n      <span class=\"s\">#    alsologtostderr: false</span>\n      <span class=\"s\">#    logBacktraceAt:</span>\n      <span class=\"s\">#    logtostderr: true</span>\n      <span class=\"s\">#    skipHeaders: false</span>\n      <span class=\"s\">#    stderrthreshold: 2</span>\n      <span class=\"s\">#    v: 0</span>\n      <span class=\"s\">#    vmodule:</span>\n      <span class=\"s\">##   NOTE: the following options are not dynamically run-time configurable</span>\n      <span class=\"s\">##         and require a nfd-worker restart to take effect after being changed</span>\n      <span class=\"s\">#    logDir:</span>\n      <span class=\"s\">#    logFile:</span>\n      <span class=\"s\">#    logFileMaxSize: 1800</span>\n      <span class=\"s\">#    skipLogHeaders: false</span>\n      <span class=\"s\">#sources:</span>\n      <span class=\"s\">#  cpu:</span>\n      <span class=\"s\">#    cpuid:</span>\n      <span class=\"s\">##     NOTE: whitelist has priority over blacklist</span>\n      <span class=\"s\">#      attributeBlacklist:</span>\n      <span class=\"s\">#        - \"BMI1\"</span>\n      <span class=\"s\">#        - \"BMI2\"</span>\n      <span class=\"s\">#        - \"CLMUL\"</span>\n      <span class=\"s\">#        - \"CMOV\"</span>\n      <span class=\"s\">#        - \"CX16\"</span>\n      <span class=\"s\">#        - \"ERMS\"</span>\n      <span class=\"s\">#        - \"F16C\"</span>\n      <span class=\"s\">#        - \"HTT\"</span>\n      <span class=\"s\">#        - \"LZCNT\"</span>\n      <span class=\"s\">#        - \"MMX\"</span>\n      <span class=\"s\">#        - \"MMXEXT\"</span>\n      <span class=\"s\">#        - \"NX\"</span>\n      <span class=\"s\">#        - \"POPCNT\"</span>\n      <span class=\"s\">#        - \"RDRAND\"</span>\n      <span class=\"s\">#        - \"RDSEED\"</span>\n      <span class=\"s\">#        - \"RDTSCP\"</span>\n      <span class=\"s\">#        - \"SGX\"</span>\n      <span class=\"s\">#        - \"SSE\"</span>\n      <span class=\"s\">#        - \"SSE2\"</span>\n      <span class=\"s\">#        - \"SSE3\"</span>\n      <span class=\"s\">#        - \"SSE4\"</span>\n      <span class=\"s\">#        - \"SSE42\"</span>\n      <span class=\"s\">#        - \"SSSE3\"</span>\n      <span class=\"s\">#      attributeWhitelist:</span>\n      <span class=\"s\">#  kernel:</span>\n      <span class=\"s\">#    kconfigFile: \"/path/to/kconfig\"</span>\n      <span class=\"s\">#    configOpts:</span>\n      <span class=\"s\">#      - \"NO_HZ\"</span>\n      <span class=\"s\">#      - \"X86\"</span>\n      <span class=\"s\">#      - \"DMI\"</span>\n      <span class=\"s\">#  pci:</span>\n      <span class=\"s\">#    deviceClassWhitelist:</span>\n      <span class=\"s\">#      - \"0200\"</span>\n      <span class=\"s\">#      - \"03\"</span>\n      <span class=\"s\">#      - \"12\"</span>\n      <span class=\"s\">#    deviceLabelFields:</span>\n      <span class=\"s\">#      - \"class\"</span>\n      <span class=\"s\">#      - \"vendor\"</span>\n      <span class=\"s\">#      - \"device\"</span>\n      <span class=\"s\">#      - \"subsystem_vendor\"</span>\n      <span class=\"s\">#      - \"subsystem_device\"</span>\n      <span class=\"s\">#  usb:</span>\n      <span class=\"s\">#    deviceClassWhitelist:</span>\n      <span class=\"s\">#      - \"0e\"</span>\n      <span class=\"s\">#      - \"ef\"</span>\n      <span class=\"s\">#      - \"fe\"</span>\n      <span class=\"s\">#      - \"ff\"</span>\n      <span class=\"s\">#    deviceLabelFields:</span>\n      <span class=\"s\">#      - \"class\"</span>\n      <span class=\"s\">#      - \"vendor\"</span>\n      <span class=\"s\">#      - \"device\"</span>\n      <span class=\"s\">#  custom:</span>\n      <span class=\"s\">#    # The following feature demonstrates the capabilities of the matchFeatures</span>\n      <span class=\"s\">#    - name: \"my custom rule\"</span>\n      <span class=\"s\">#      labels:</span>\n      <span class=\"s\">#        my-ng-feature: \"true\"</span>\n      <span class=\"s\">#      # matchFeatures implements a logical AND over all matcher terms in the</span>\n      <span class=\"s\">#      # list (i.e. all of the terms, or per-feature matchers, must match)</span>\n      <span class=\"s\">#      matchFeatures:</span>\n      <span class=\"s\">#        - feature: cpu.cpuid</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            AVX512F: {op: Exists}</span>\n      <span class=\"s\">#        - feature: cpu.cstate</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            enabled: {op: IsTrue}</span>\n      <span class=\"s\">#        - feature: cpu.pstate</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            no_turbo: {op: IsFalse}</span>\n      <span class=\"s\">#            scaling_governor: {op: In, value: [\"performance\"]}</span>\n      <span class=\"s\">#        - feature: cpu.rdt</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            RDTL3CA: {op: Exists}</span>\n      <span class=\"s\">#        - feature: cpu.sst</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            bf.enabled: {op: IsTrue}</span>\n      <span class=\"s\">#        - feature: cpu.topology</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            hardware_multithreading: {op: IsFalse}</span>\n      <span class=\"s\">#</span>\n      <span class=\"s\">#        - feature: kernel.config</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            X86: {op: Exists}</span>\n      <span class=\"s\">#            LSM: {op: InRegexp, value: [\"apparmor\"]}</span>\n      <span class=\"s\">#        - feature: kernel.loadedmodule</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            e1000e: {op: Exists}</span>\n      <span class=\"s\">#        - feature: kernel.selinux</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            enabled: {op: IsFalse}</span>\n      <span class=\"s\">#        - feature: kernel.version</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            major: {op: In, value: [\"5\"]}</span>\n      <span class=\"s\">#            minor: {op: Gt, value: [\"10\"]}</span>\n      <span class=\"s\">#</span>\n      <span class=\"s\">#        - feature: storage.block</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            rotational: {op: In, value: [\"0\"]}</span>\n      <span class=\"s\">#            dax: {op: In, value: [\"0\"]}</span>\n      <span class=\"s\">#</span>\n      <span class=\"s\">#        - feature: network.device</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            operstate: {op: In, value: [\"up\"]}</span>\n      <span class=\"s\">#            speed: {op: Gt, value: [\"100\"]}</span>\n      <span class=\"s\">#</span>\n      <span class=\"s\">#        - feature: memory.numa</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            node_count: {op: Gt, value: [\"2\"]}</span>\n      <span class=\"s\">#        - feature: memory.nv</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            devtype: {op: In, value: [\"nd_dax\"]}</span>\n      <span class=\"s\">#            mode: {op: In, value: [\"memory\"]}</span>\n      <span class=\"s\">#</span>\n      <span class=\"s\">#        - feature: system.osrelease</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            ID: {op: In, value: [\"fedora\", \"centos\"]}</span>\n      <span class=\"s\">#        - feature: system.name</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            nodename: {op: InRegexp, value: [\"^worker-X\"]}</span>\n      <span class=\"s\">#</span>\n      <span class=\"s\">#        - feature: local.label</span>\n      <span class=\"s\">#          matchExpressions:</span>\n      <span class=\"s\">#            custom-feature-knob: {op: Gt, value: [\"100\"]}</span>\n</code></pre>  </div></div>\n\n<p>For more information about how to setup the <code class=\"language-plaintext highlighter-rouge\">WorkerConfig</code> stanza,\nsee\n<a href=\"https://kubernetes-sigs.github.io/node-feature-discovery/master/advanced/worker-configuration-reference.html\">worker config reference</a></p>\n","dir":"/advanced/","name":"nodefeaturediscovery.md","path":"advanced/nodefeaturediscovery.md","url":"/advanced/nodefeaturediscovery.html"},{"title":"Manual deployment","layout":"default","sort":2,"content":"<h1 id=\"manual-deployment\">Manual deployment</h1>\n\n<h2 class=\"no_toc\" id=\"table-of-contents\">Table of contents</h2>\n\n<ol class=\"no_toc text-delta\" id=\"markdown-toc\">\n <li><a href=\"#manual-deployment\" id=\"markdown-toc-manual-deployment\">Manual deployment</a></li>\n <li><a href=\"#requirements\" id=\"markdown-toc-requirements\">Requirements</a></li>\n <li><a href=\"#manual-deployment-1\" id=\"markdown-toc-manual-deployment-1\">Manual deployment</a> <ol>\n <li><a href=\"#verify\" id=\"markdown-toc-verify\">Verify</a></li>\n </ol>\n </li>\n <li><a href=\"#uninstallation\" id=\"markdown-toc-uninstallation\">Uninstallation</a></li>\n</ol>\n\n<hr />\n<h1 id=\"requirements\">Requirements</h1>\n\n<ol>\n <li>Linux (x86_64/Arm64/Arm)</li>\n <li><a href=\"https://kubernetes.io/docs/tasks/tools/install-kubectl\">kubectl</a>\n(properly set up and configured to work with your Kubernetes cluster)</li>\n</ol>\n\n<h1 id=\"manual-deployment-1\">Manual deployment</h1>\n\n<p>Get the source code</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>git clone <span class=\"nt\">-b</span> master https://github.com/kubernetes-sigs/node-feature-discovery-operator\n</code></pre>  </div></div>\n\n<p>Deploy the operator</p>\n\n<blockquote>\n <p>By default it will deploy using the minimal tag image, is\ndesired you can simply modify the IMAGE_TAG env var to point to the image\ntag to use.</p>\n</blockquote>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">IMAGE_TAG</span><span class=\"o\">=</span>gcr.io/k8s-staging-nfd/node-feature-discovery-operator:master-minimal\nmake deploy\n</code></pre>  </div></div>\n\n<p>By default the operator will watch <code class=\"language-plaintext highlighter-rouge\">NodeFeatureDiscovery</code> objects\nonly in the namespace where the operator is deployed in. This is\nspecified by the <code class=\"language-plaintext highlighter-rouge\">WATCH_NAMESPACE</code> env variable in the operator\ndeployment manifest. If unset the operator will watch ALL\nnamespaces.</p>\n\n<p>Create a NodeFeatureDiscovery instance</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>kubectl apply <span class=\"nt\">-f</span> config/samples/nfd.kubernetes.io_v1_nodefeaturediscovery.yaml\n</code></pre>  </div></div>\n\n<h2 id=\"verify\">Verify</h2>\n\n<p>The Operator will deploy NFD based on the information\non the NodeFeatureDiscovery CR instance,\nafter a moment you should be able to see</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">$ </span>kubectl <span class=\"nt\">-n</span> node-feature-discovery-operator get ds,deploy\nNAME                        DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR   AGE\ndaemonset.apps/nfd-worker   3         3         3       3            3           &lt;none&gt;          5s\nNAME                         READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/nfd-master   1/1     1            1           17s\n</code></pre>  </div></div>\n\n<p>Check that NFD feature labels have been created</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"nv\">$ </span>kubectl get no <span class=\"nt\">-o</span> json | jq .items[].metadata.labels\n<span class=\"o\">{</span>\n  <span class=\"s2\">\"feature.node.kubernetes.io/cpu-cpuid.ADX\"</span>: <span class=\"s2\">\"true\"</span>,\n  <span class=\"s2\">\"feature.node.kubernetes.io/cpu-cpuid.AESNI\"</span>: <span class=\"s2\">\"true\"</span>,\n  <span class=\"s2\">\"feature.node.kubernetes.io/cpu-cpuid.AVX\"</span>: <span class=\"s2\">\"true\"</span>,\n  <span class=\"s2\">\"kubernetes.io/arch\"</span>: <span class=\"s2\">\"amd64\"</span>,\n  <span class=\"s2\">\"kubernetes.io/os\"</span>: <span class=\"s2\">\"linux\"</span>,\n...\n</code></pre>  </div></div>\n\n<h1 id=\"uninstallation\">Uninstallation</h1>\n\n<p>If you followed the deployment instructions from the above you\ncan simply do:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>kubectl <span class=\"nt\">-n</span> nfd-operator delete NodeFeatureDiscovery my-nfd-deployment\n</code></pre>  </div></div>\n\n<p>Optionally, you can also remove the namespace:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>kubectl delete ns nfd-operator\n</code></pre>  </div></div>\n\n<p>See the <a href=\"https://github.com/kubernetes-sigs/node-feature-discovery-operator\">node-feature-discovery-operator</a> and <a href=\"https://github.com/operator-framework/operator-lifecycle-manager\">OLM</a> project\ndocumentation for instructions for uninstalling the operator and operator\nlifecycle manager, respectively.</p>\n\n<!-- Links -->\n","dir":"/deployment/","name":"manual.md","path":"deployment/manual.md","url":"/deployment/manual.html"},{"title":"Deployment","layout":"default","sort":2,"content":"<h1 id=\"deployment\">Deployment</h1>\n\n<p><a href=\"manual\">Installation</a> provides instructions for installing NFD-Operator to a\ncluster.</p>\n\n<p><a href=\"manual\">Uninstallation</a> provides instructions for removing NFD-Operator from a\ncluster.</p>\n\n<p><a href=\"helm\">Using Helm</a> provides easy management of NFD-Operator deployments with\nnice configuration management and easy upgrades.</p>\n\n<p>See <a href=\"image-variants\">Image variants</a> for description of the different NFD-Operator\ncontainer images available.</p>\n","dir":"/deployment/","name":"index.md","path":"deployment/index.md","url":"/deployment/"},{"title":"Advanced","layout":"default","sort":3,"content":"<h1 id=\"advanced\">Advanced</h1>\n\n<p>Advanced topics and reference.</p>\n\n<p>Continue to:</p>\n\n<ul>\n <li>\n <p><strong><a href=\"/developer-guide\">Developer guide</a></strong> for instructions on how to\ndevelop and test NFD-Operator.</p>\n </li>\n <li>\n <p><strong><a href=\"/NodeFeatureDiscovery\">NodeFeatureDiscovery</a></strong> for more information\nabout the NodeFeatureDiscovery CRD.</p>\n </li>\n</ul>\n","dir":"/advanced/","name":"index.md","path":"advanced/index.md","url":"/advanced/"},{"title":"Image variants","layout":"default","sort":3,"content":"<h1 id=\"image-variants\">Image variants</h1>\n\n<h2 class=\"no_toc\" id=\"table-of-contents\">Table of contents</h2>\n\n<ol class=\"no_toc text-delta\" id=\"markdown-toc\">\n <li><a href=\"#image-variants\" id=\"markdown-toc-image-variants\">Image variants</a></li>\n <li><a href=\"#image-variants-1\" id=\"markdown-toc-image-variants-1\">Image variants</a> <ol>\n <li><a href=\"#default\" id=\"markdown-toc-default\">Default</a></li>\n <li><a href=\"#full\" id=\"markdown-toc-full\">Full</a></li>\n </ol>\n </li>\n</ol>\n\n<hr />\n\n<h1 id=\"image-variants-1\">Image variants</h1>\n\n<p>Node-Feautre-Discovery-Operator currently offers two variants\nof the container image. The “full” variant is currently\ndeployed by default.</p>\n\n<h2 id=\"default\">Default</h2>\n\n<p>This is a minimal image based on:\n<a href=\"https://github.com/GoogleContainerTools/distroless/blob/master/base/README.md\">gcr.io/distroless/base</a></p>\n\n<p>The container image tag has suffix <code class=\"language-plaintext highlighter-rouge\">-minimal</code>\n(e.g. <code class=\"language-plaintext highlighter-rouge\">gcr.io/k8s-staging-nfd/node-feature-discovery-operator:master-minimal-minimal</code>)\nand the image is deployed by default.</p>\n\n<h2 id=\"full\">Full</h2>\n\n<p>This image is based on\n<a href=\"https://hub.docker.com/_/debian\">debian:buster-slim</a> and contains a full Linux\nsystem for doing live debugging and diagnosis of the operator.</p>\n","dir":"/deployment/","name":"image-variants.md","path":"deployment/image-variants.md","url":"/deployment/image-variants.html"},{"title":"Cleanup","layout":"default","sort":4,"content":"<h1 id=\"removing-feature-labels\">Removing feature labels</h1>\n\n<p>From the <a href=\"https://github.com/kubernetes-sigs/node-feature-discovery\">Operand repository</a> NFD-Master has a special <code class=\"language-plaintext highlighter-rouge\">-prune</code> command\nline flag for removing all nfd-related node labels, annotations and extended\nresources from the cluster.</p>\n\n<p>In order to remove all feature labels from the cluster, run the following\ncommand:</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>kubectl apply <span class=\"nt\">-k</span> https://github.com/kubernetes-sigs/node-feature-discovery/deployment/overlays/prune?ref<span class=\"o\">=</span>master\nkubectl <span class=\"nt\">-n</span> node-feature-discovery <span class=\"nb\">wait </span>job.batch/nfd-master <span class=\"nt\">--for</span><span class=\"o\">=</span><span class=\"nv\">condition</span><span class=\"o\">=</span><span class=\"nb\">complete</span> <span class=\"o\">&amp;&amp;</span> <span class=\"se\">\\</span>\n    kubectl delete <span class=\"nt\">-k</span> https://github.com/kubernetes-sigs/node-feature-discovery/deployment/overlays/prune?ref<span class=\"o\">=</span>master\n</code></pre>  </div></div>\n\n<!-- Links -->\n","dir":"/deployment/","name":"cleanup.md","path":"deployment/cleanup.md","url":"/deployment/cleanup.html"},{"title":"Contributing","layout":"default","sort":4,"content":"<h1 id=\"contributing\">Contributing</h1>\n\n<hr />\n\n<h2 id=\"community\">Community</h2>\n\n<p>You can reach us via the following channels:</p>\n\n<ul>\n <li><a href=\"https://kubernetes.slack.com/messages/node-feature-discovery\">#node-feature-discovery</a>\nchannel in <a href=\"https://slack.k8s.io/\">Kubernetes Slack</a></li>\n <li><a href=\"https://groups.google.com/g/kubernetes-sig-node\">SIG-Node</a> mailing list</li>\n <li>File an\n<a href=\"https://github.com/kubernetes-sigs/node-feature-discovery-operator/issues/new\">issue</a>\nin this repository</li>\n</ul>\n\n<h2 id=\"governance\">Governance</h2>\n\n<p>This is a\n<a href=\"https://github.com/kubernetes/community/blob/master/sig-node/README.md\">SIG-node</a>\nsubproject, hosted under the\n<a href=\"https://github.com/kubernetes-sigs\">Kubernetes SIGs</a> organization in Github.\nThe project was established in 2016 and was migrated to Kubernetes SIGs in 2018.</p>\n\n<h2 id=\"license\">License</h2>\n\n<p>This is open source software released under the <a href=\"https://github.com/kubernetes-sigs/node-feature-discovery/blob/master/LICENSE\">Apache 2.0 License</a>.</p>\n","dir":"/contributing/","name":"index.md","path":"contributing/index.md","url":"/contributing/"}]